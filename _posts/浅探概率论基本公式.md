---
title: 浅探概率论基本公式
date: 2020-08-11 10:38:26
tags: math
---

学习概率论过程中对公式的一点思考。

<!--more-->

*在此不对概率论的基础概念一一阐述，而只讨论对部分知识的思考。*

概率论与集合论是有密切联系的，因此接下来提及的许多公式可以使用$ven$图来辅助理解。不过这里先针对一些概率论中事件的基础表示法加以辨析，以避免混淆，并讨论相应的内容分在集合论中的内涵。

- $AB$表示事件$A$与事件$B$都发生，可视为取集合交集，即$A \cap B$。
- $A + B$ 表示将事件$A$与事件$B$当作一个事件看待，即事件$A$或$B$任意一个发生都视为本事件（即$A + B$事件）发生，可视为集合并集，即$A \cup B$。
- $A - B$ 表示事件$A$发生的同时事件$B$不发生，从集合的角度看，则是集合$A$与$B$可能有交集，而我们取只属于$A$的部分。
- $\bar A$表示$A$事件的对立事件，对于集合来说可视为取补集。

有了这些基本的了解，接下来罗列一些概率论的基本公式：

1. 对立事件概率公式
    $$P(A) = 1 - P(\bar A)$$
    对立事件公式应该是所有公式里最容易理解的一个，因此不再赘述其内涵。需要注意的是，对立事件公式与其视为公式，不如视为一种思考方式，这可以对我们解决各类问题都有所启发。
2. 减法公式
    $$P(A \bar B) = P(A - B) = P(A) - P(AB)$$
    实际上，只要联系了集合概念，减法公式可以通过$ven$图轻松理解。我们可以看下图：
    ![ven_01](https://user-images.githubusercontent.com/61586472/89872541-af1e0880-dbeb-11ea-92c9-cc70835bfbe7.png)
    我们实际上正是在求阴影部分概率，结合几何概型不难得出减法公式。
3. 加法公式
    $$P(A + B) = P(A) + P(B) - P(AB)$$
    也许一开始我们会疑惑为什么最后还需要减去一项，而联系集合论就不难发现，这是容斥原理——简单地将，交集被加了两次，因此要减回来。
4. 条件概率公式/除法公式
    $$P(A|B) = \frac{P(AB)}{P(B)}$$
    条件概率公式是挺有意思的公式，同样可以结合文氏图来理解：
    ![ven_02](https://user-images.githubusercontent.com/61586472/89872547-b0e7cc00-dbeb-11ea-993e-c88c63b8deea.png)
    $P(A|B)$指的是*在$B$发生的情况下$A$发生的概率*。从结果上看，$A$与$B$都要发生，那么从图中看就是两个集合的交集部分。而为什么要除以一个$P(B)$呢？这里我建议结合几何概型来理解:

    > 若$\Omega$是一个可度量的几何区域，且样本点落入$\Omega$中的某一可度量子区域$A$的概率与$A$的几何度量成正比，而与$A$的位置形状无关，则称这样的概率模型为**几何概型**。

    站在这个角度，我们可以把集合理解为几何区域，$P(B)$理解为区域$B$的面积，而$P(AB)$则是上图阴影部分的面积，这时候根据条件概率的描述——*在$B$发生的情况下$A$发生的概率*，就可以理解为*区域$A$的面积占区域$B$的面积的百分比*，公式的含义就十分明了了。

    甚至，我们可以对条件概率公式中的思考方式加以推广：当我们讨论某个事件$A$的概率$P(A)$时，我们总是要有一个样本空间的。我们的前提就是样本点必定取在样本空间内，换言之，将事件“样本点取在样本空间内”记为事件$B$，$P(B) = 1$。我们讨论的$P(A)$则可视为$P(A|B)$，展开后根据条件概率公式和独立事件概率计算方法带入计算，依然可以化简为$P(A)$——这并不是多此一举，而是包括了样本空间（或，集合论中对应称全集）的更一般的理解。有了这样的理解，我们就可以允许样本空间扩张或收缩，并利用条件概率的思想计算出某个事件在新样本空间下的新概率。

5. 乘法公式
    $$
    P(AB) = \begin{cases}
    P(A)P(B|A),&P(A) > 0\\
    P(B)P(A|B),&P(B) > 0
    \end{cases}
    $$
    我们不难发现，乘法公式就是条件概率公式的变形——而乘法具有交换律，因此可以有两个形式。

    ---

    接下来的两个公式不同于上面五个，下面的两个用于处理分阶段的事件。

6. 全集分解公式/全概公式
    $$P(B) = \sum_{i = 1}^n P(A_i)P(B|A_i)$$

    引例：一个村子内有且仅有三个小偷$1, 2, 3$，他们偷窃得手的概率分别是$A_1, A_2, A_3$，三选一去偷窃，求村子失窃的概率。

    我们首先记$B = \{失窃\}$。可见，这个例子比较复杂，因为村子是否失窃，不仅与谁去偷有关系，也与该选手的偷窃能力有关系。整个事情分为两个阶段：
    1. 选人
    2. 偷窃

    这时我们欲求$P(B)$需要如何做呢？

    先插播一则概念：

    > 任意给出事件$A_1, A_2, ..., A_n$，若：
    > $$
    > \begin{cases}A_1 \cup A_2 \cup ... \cup A_n = \Omega\\
    > A_iA_j = \emptyset, i \not = j
    > \end{cases}
    > $$
    > 则称这一组事件构成**完备事件组**。

    我们不难发现，选人阶段，若将分别选中三人看作三个事件，那么这三个事件构成完备事件组。而要实施偷窃，人是必须选出来的，也就是“有一个人被选出来”这个事件必定会发生。这样看来，我们要求的$P(B)$实际上是$P(B\Omega)$，其中的$\Omega$指该必然事件。于是我们可以将$1, 2, 3$被选中事件分别记为$A_1, A_2, A_3$，并按照如下推导：
    $$
    \begin{aligned}P(B) &= P(B\Omega)\\
    &= P(B(A_1 \cup A_2 \cup A_3))\\
    &=P(BA_1 \cup BA_2 \cup BA_3)\\
    &=P(BA_1) + P(BA_2) + P(BA_3)\\
    &= P(A_1)P(B|A_1) + P(A_2)P(B|A_2) + P(A_3)P(B|A_3)
    \end{aligned}
    $$
    故，
    $$
    P(B) = \sum_{i = 1}^n P(A_i)P(B|A_i)
    $$

7. 贝叶斯公式/逆概公式
    $$
    P(A_j|B) = \frac{P(A_jB)}{P(B)} = \frac{P(A_j)P(B|A_j)}{\sum_{i = 1}^nP(A_i)P(B|A_j)}
    $$

    逆概公式的思想是“执果索因”——亦即是问：现在村子失窃了，那么是谁偷的？这同样是涉及两个阶段的过程，较为复杂。而逆概公式借助条件概率的表述，可以将算式写作上式中间的形式，又借助我们推导过的全概公式和乘法公式，就可以轻松得出概率计算式了。
